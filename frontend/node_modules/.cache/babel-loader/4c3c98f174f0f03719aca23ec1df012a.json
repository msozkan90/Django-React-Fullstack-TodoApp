{"ast":null,"code":"import _slicedToArray from\"C:/Users/OZCAN/Desktop/django_react/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useCookies}from'react-cookie';import Alert from'../Alert';import{useNavigate}from'react-router-dom';import APIService from'../APIService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),error_msg=_useState6[0],setErrorMsg=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),error_type=_useState8[0],setErrorType=_useState8[1];var _useCookies=useCookies(['mytoken']),_useCookies2=_slicedToArray(_useCookies,2),token=_useCookies2[0],setToken=_useCookies2[1];var navigate=useNavigate();useEffect(function(){APIService.NavigateToLogin(token,navigate);},[token]);var handleUsername=function handleUsername(e){setUsername(e.target.value);};var handlePassword=function handlePassword(e){setPassword(e.target.value);};var LoginUser=function LoginUser(body){return fetch('http://127.0.0.1:8000/auth/',{'method':'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)}).then(function(resp){return resp.json();}).then(function(resp){return responseStatus(resp);}).catch(function(error){return console.log(error);});};var responseStatus=function responseStatus(response){if(response.token){console.log(\"ifteyim\");setErrorMsg(undefined);setErrorType(undefined);setToken('mytoken',response.token);}else{setErrorMsg(\"Username or Password is not correct\");setErrorType(\"danger\");}};var handleSubmit=function handleSubmit(e){e.preventDefault();setErrorMsg(undefined);setErrorType(undefined);if(username==''||password==''){setErrorMsg(\"Username or Password fields cannot leave blank.\");setErrorType(\"danger\");}else{LoginUser({username:username,password:password});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(Alert,{alert_msg:error_msg,alert_type:error_type}),/*#__PURE__*/_jsx(\"h3\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{action:\"\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"id_username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handleUsername,value:username,type:\"text\",className:\"form-control\",name:\"username\",autoFocus:\"\",required:\"\",id:\"id_username\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"id_password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{onChange:handlePassword,className:\"form-control \",type:\"password\",name:\"password\",required:\"\",id:\"id_password\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-dark w-100\",type:\"submit\",children:\"Login\"})})]})]})]})}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"]});}export default Login;","map":{"version":3,"names":["React","useState","useEffect","useCookies","Alert","useNavigate","APIService","Login","username","setUsername","password","setPassword","error_msg","setErrorMsg","error_type","setErrorType","token","setToken","navigate","NavigateToLogin","handleUsername","e","target","value","handlePassword","LoginUser","body","fetch","headers","JSON","stringify","then","resp","json","responseStatus","catch","error","console","log","response","undefined","handleSubmit","preventDefault"],"sources":["C:/Users/OZCAN/Desktop/django_react/frontend/src/pages/Login.jsx"],"sourcesContent":["import React, {useState, useEffect} from 'react'\r\nimport {useCookies} from 'react-cookie';\r\nimport Alert from '../Alert';\r\nimport {useNavigate} from 'react-router-dom';\r\nimport APIService from '../APIService';\r\nfunction Login() {\r\n  const [username, setUsername] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [error_msg, setErrorMsg] = useState()\r\n  const [error_type, setErrorType] = useState()\r\n\r\n  const [token, setToken] = useCookies(['mytoken'])\r\n  let navigate  = useNavigate()\r\n\r\n\r\n  useEffect(() => {\r\n    APIService.NavigateToLogin(token,navigate)\r\n\r\n}, [token])\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst  handleUsername =(e) =>{\r\n \r\n    setUsername(e.target.value)\r\n\r\n    }\r\n  \r\n\r\n const  handlePassword = (e) =>{\r\n\r\n    \r\n    setPassword(e.target.value)\r\n\r\n\r\n  \r\n  }\r\n\r\n  const LoginUser =(body) =>{\r\n\r\n    return fetch('http://127.0.0.1:8000/auth/', {\r\n      'method':'POST',\r\n      headers: {\r\n          'Content-Type':'application/json',\r\n          \r\n        }, \r\n        body:JSON.stringify(body)\r\n\r\n    })\r\n    .then(resp => resp.json())\r\n    .then(resp => responseStatus(resp))\r\n     .catch(error =>console.log(error))\r\n\r\n  }\r\n\r\n\r\n\r\nconst responseStatus = (response) =>{\r\n\r\n  if (response.token){\r\n    console.log(\"ifteyim\")\r\n    setErrorMsg(undefined)\r\n    setErrorType(undefined)\r\n   setToken('mytoken',response.token)\r\n  }\r\n  else{\r\n    setErrorMsg(\"Username or Password is not correct\")\r\n    setErrorType(\"danger\")\r\n\r\n    \r\n\r\n  }\r\n}\r\n\r\n const handleSubmit = (e) =>{\r\n  e.preventDefault()\r\n    setErrorMsg(undefined)\r\n    setErrorType(undefined)\r\n    if (username == '' || password == ''){\r\n      setErrorMsg(\"Username or Password fields cannot leave blank.\")\r\n      setErrorType(\"danger\")\r\n    }\r\n    else{\r\n      \r\n       LoginUser({username, password})\r\n\r\n\r\n    }\r\n\r\n   \r\n  }\r\n  return (\r\n    <>\r\n    <div className=\"container\">\r\n      <div className=\"row\">\r\n        <div className=\"col-md-3\"></div>\r\n        <div className=\"col-md-6\">\r\n        < Alert alert_msg= {error_msg}  alert_type= {error_type}/>\r\n        <h3>Login</h3>\r\n          <form action=\"\" onSubmit={handleSubmit} >\r\n         \r\n            <div className=\"form-group\">\r\n            <label htmlFor=\"id_username\">Username</label>\r\n            <input  onChange={handleUsername} value={username}  type=\"text\"  className=\"form-control\"  name=\"username\"   autoFocus=\"\"  required=\"\" id=\"id_username\"/>\r\n            </div>\r\n            <div className=\"form-group\">\r\n            <label htmlFor=\"id_password\">Password</label>\r\n            <input  onChange={handlePassword} className=\"form-control \" type=\"password\" name=\"password\"   required=\"\" id=\"id_password\" />\r\n\r\n            </div>\r\n            <div className=\"form-group\">\r\n            <button className='btn btn-dark w-100' type=\"submit\">Login</button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n        \r\n</>\r\n  )\r\n}\r\n\r\nexport default Login\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}